%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,12pt,spanish]{report}

%
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax



\usepackage[utf8]{inputenc}

% Esto es para los símbolos en los snippets, por ejemplo donde 
% enlisto los archivos del directorio.

\ifdefined\DeclareUnicodeCharacter
 \ifdefined\DeclareUnicodeCharacterAsOptional
  \DeclareUnicodeCharacter{"00A0}{\nobreakspace}
  \DeclareUnicodeCharacter{"2500}{\sphinxunichar{2500}}
  \DeclareUnicodeCharacter{"2502}{\sphinxunichar{2502}}
  \DeclareUnicodeCharacter{"2514}{\sphinxunichar{2514}}
  \DeclareUnicodeCharacter{"251C}{\sphinxunichar{251C}}
  \DeclareUnicodeCharacter{"2572}{\textbackslash}
 \else
  \DeclareUnicodeCharacter{00A0}{\nobreakspace}
  \DeclareUnicodeCharacter{2500}{\sphinxunichar{2500}}
  \DeclareUnicodeCharacter{2502}{\sphinxunichar{2502}}
  \DeclareUnicodeCharacter{2514}{\sphinxunichar{2514}}
  \DeclareUnicodeCharacter{251C}{\sphinxunichar{251C}}
  \DeclareUnicodeCharacter{2572}{\textbackslash}
 \fi
\fi

\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{amsthm}
\usepackage{babel}
\usepackage{multirow}
\usepackage[table,xcdraw]{xcolor}
\usepackage{longtable}
\usepackage[dontkeepoldnames]{sphinx}
\usepackage{bold-extra}
\usepackage{caption}
\usepackage{subfig}
\usepackage{url}
\usepackage[xindy,toc]{glossaries} 
% \usepackage[toc]{glossaries}
\input{glossary.tex}
\makeglossaries

% \usepackage{natbib}

%\usepackage{apalike}
%\usepackage{setspace}
%\doublespacing

\newenvironment{dedication}
  {\clearpage           % we want a new page          %% I commented this
   \thispagestyle{empty}% no header and footer
   \vspace*{\stretch{1}}% some space at the top
   \itshape             % the text is in italics
   \raggedleft          % flush to the right margin
  }
  {\par % end the paragraph
   \vspace{\stretch{3}} % space at bottom is three times that at the top
   \clearpage           % finish off the page
  }
  
  
\def\@makechapterhead#1{\vspace*{50\p@}{\parindent\z@\raggedright\normalfont\ifnum\c@secnumdepth>\m@ne\if@mainmatter\huge\bfseries\@chapapp\space\thechapter: \fi\fi\interlinepenalty\@M\Huge\bfseries#1\par\nobreak\vskip40\p@}}
\makeatother

\usepackage[left=37mm,right=30mm,top=35mm,bottom=30mm]{geometry}
% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\usepackage{appendix}

% \usepackage[
% backend=biber
% ,style=iso-authoryear
% ,sortlocale=cs_CZ
% ,autolang=other
% ,bibencoding=UTF8
% ]{biblatex}

% \addbibresource{referencias.bib}

\addto\captionsspanish{
\renewcommand{\appendixname}{Anexo}
\renewcommand{\appendixtocname}{Anexos}
\renewcommand{\appendixpagename}{Anexos}
}

\addto\captionsspanish{\renewcommand{\contentsname}{Contenido}}

\addto\captionsspanish{\renewcommand{\figurename}{Figura}}
\addto\captionsspanish{\renewcommand{\tablename}{Tabla}}
\addto\captionsspanish{\renewcommand{\literalblockname}{Lista}}

\addto\captionsspanish{\renewcommand{\literalblockcontinuedname}{continued from previous page}}
\addto\captionsspanish{\renewcommand{\literalblockcontinuesname}{continues on next page}}

\addto\extrasspanish{\def\pageautorefname{página}}

\newtheorem*{remark}{Afirmación}
% \setcounter{secnumdepth}{4}






\newcounter{subsubparagraph}[subparagraph]
\renewcommand\thesubsubparagraph{%
  \thesubparagraph.\@arabic\c@subsubparagraph}


\titleformat{\paragraph}
{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titlespacing*{\paragraph}
{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}



%\renewcommand{\baselinestretch}{2}

\title{CloudNAO: Una arquitectura de software para la integración de
cómputo en la nube con robots NAO}
\date{\today}
\release{1.0}
\author{Ivan Raymundo Feliciano Avelino}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Versión}
\makeindex

\graphicspath {{figures/}}

\glsaddall

\begin{document}
\ifnum\catcode`\"=\active\shorthandoff{"}\fi
% \maketitle
\input{portada.tex}

\begin{dedication}
    \vspace{\baselineskip}
    A mis padres, a quienes siguen luchando y a los que se quedaron. 
  \end{dedication}

\sphinxtableofcontents
%\phantomsection\label{\detokenize{index::doc}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%% Introducción %%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%




\input{intro.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%% Capítulo 1 : Antecedentes %%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Antecedentes}
\label{\detokenize{chapter_one:antecedentes}}\label{\detokenize{chapter_one::doc}}

En este capítulo se describen los conceptos 
teóricos y prácticos utilizados para el desarrollo
de la arquitectura de software CloudNAO.

En la Sección \ref{\detokenize{chapter_one/naoqi::doc}}, primero se describen los componentes del robot  
NAO, para después hablar del marco de trabajo NAOqi, sus características, las API que lo componen, su uso y los SDK disponibles. 

La Sección \ref{chapter_two/deep_learning_tf} 
aborda de manera general lo que es el aprendizaje 
profundo, primero introduciendo conceptos básicos del 
aprendizaje automático, siguiendo con redes neuronales 
para finalmente llegar a las redes neuronales profundas, 
en específico, las redes convolucionales. En esa misma 
sección hay un apartado sobre la biblioteca TensorFlow,
donde se describe la estructura de un programa
usando esta herramienta y un ejemplo muy
sencillo para poner en práctica el paradigma de programación utilizado
en TensorFlow.

En la Sección \ref{\detokenize{chapter_one/cloud_computing::doc}}
se define el concepto de cómputo en la nube, las 
características y capas de éste, 
las tecnologías que involucra y las diferencias entre los 
servicios y el cómputo en la nube.

La Sección \ref{\detokenize{chapter_one/rest::doc}}
presenta el estilo de arquitectura de software REST.
Se muestran algunos conceptos generales del protocolo
HTTP y la web, finalizando con los elementos 
que componen a la arquitectura REST.

La Sección \ref{\detokenize{chapter_one/firebase::doc}}
comienza con una breve definición del modelo 
de Backend as a Service, para después
explicar lo que es la plataforma Firebase y los servicios
que se ocupan en este trabajo.

En la última sección de este capítulo, se muestran los 
servicios utilizados dentro de la arquitectura. Además,
para amarrar mejor los conceptos explicados 
en la Sección \ref{\detokenize{chapter_one/rest::doc}},
para cada servicio se describe el funcionamiento
de la API REST con la que cuenta.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\input{C1_antecedentes/naoqi.tex}
\input{C1_antecedentes/deep_learning_and_tf.tex}
\input{C1_antecedentes/cloud_computing.tex}
\input{C1_antecedentes/rest.tex}
\input{C1_antecedentes/baas_firebase.tex}
\input{C1_antecedentes/apis.tex}

\section*{Conclusiones del capítulo}
En este capítulo se describieron algunos 
fundamentos teóricos y prácticos de la arquitectura de software 
propuesta. Se mencionó el funcionamiento de varios elementos que 
componen al robot NAO, a nivel hardware y software, así como el uso de los SDK para Java, Python y
ciertas interfaces para el control del robot, captura de 
video, imágenes, audio, etc. 

En el apartado de aprendizaje profundo se definieron 
conceptos muy generales del aprendizaje automático,
se ahondó en las redes neuronales y el algoritmo de 
retropropagación para el aprendizaje de los parámetros
de una red y finalmente se describieron las redes
convolucionales con un enfoque hacia la visión 
computacional. De TensorFlow, se mostró 
la estructura fundamental de un programa usando esta
biblioteca y de los objetos que utiliza
para el entrenamiento y evaluación de un modelo, 
incluyendo un ejemplo, usando Python, de una
red neuronal que aprende la función XOR. 

En cuanto a las secciones de cómputo en la nube
y REST, se describieron algunos conceptos teóricos
de cada uno y las tecnologías que están involucradas.

De Firebase se mencionaron a grandes rasgos 
tres características que ofrece y que se ocupan
en este proyecto, la base de datos en tiempo real,
el servicio de autenticación y el servicio de alojamiento.
En el apartado de las API REST se describió 
el flujo de petición y respuesta
de los servicios de Google Cloud, Kairos y Wit.ai.

% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% %%%%%%%%%%%%%% Capítulo 2 : CloudNAO %%%%%%%%%%%%%%%%%%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{La arquitectura CloudNAO}
\label{\detokenize{chapter_two:la-arquitectura-cloudnao}}\label{\detokenize{chapter_two::doc}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

En este capítulo se explica el desarrollo de la 
arquitectura de software CloudNAO y algunos casos de 
estudio donde se usan partes de ésta.

Los elementos de CloudNAO son: una API REST que integra servicios de terceros y servicios desarrollados por el LAR, una aplicación móvil para 
dispositivos con el sistema operativo Android, la
plataforma Firebase, una aplicación web y 
al robot humanoide NAO.  En la Sección 
\ref{\detokenize{chapter_two/desc_cloudnao:descripcion-de-la-arquitectura-cloudnao}} se describen los componentes 
listados anteriormente, su papel dentro de la arquitectura, la comunicación y relación entre ellos. 
Además, este apartado sirve como documentación para
desarrolladores y usuarios finales.

La Sección \ref{\detokenize{chapter_two/study_cases_implementation::doc}} está compuesta por tres casos de estudio
donde se muestran en acción algunos elementos de la arquitectura como la aplicación móvil y al robot conectándose directamente a servicios para realizar algunas tareas. El primer caso es el 
reconocimiento rostros, el segundo incluye el reconocimiento
óptico de caracteres y su traducción y el tercer caso es
el reconocimiento de voz con el objetivo de que
el robot realice algunas tareas utilizando comandos por voz.

\input{C2_arquitectura_cloudnao/intro}
\input{C2_arquitectura_cloudnao/lar_server}
\input{C2_arquitectura_cloudnao/api_rest_cloudnao}
\input{C2_arquitectura_cloudnao/firebase_and_cloudnao}
\input{C2_arquitectura_cloudnao/android}
\input{C2_arquitectura_cloudnao/robot_firebase_docs}
\input{C2_arquitectura_cloudnao/web_app_docs}
\input{C2_arquitectura_cloudnao/casos_de_estudio}

\section*{Conclusiones del capítulo}
En este capítulo se explicó detalladamente la arquitectura
de software CloudNAO, la cual llevó al
cumplimiento del primer objetivo
de esta investigación: desarrollar una arquitectura de 
software para la integración de cómputo en
la nube con robots NAO. Se mencionaron los 
siguientes elementos dentro de la 
arquitectura:

\begin{itemize}
    \item Una API REST. Se mostraron los servicios que brinda: detección y reconocimiento de 
    rostros, procesamiento de un mensaje oral o escrito,
    OCR y traducción de texto, detección de objetos,
    y clasificación de imágenes. Se describe
    el flujo de petición y repuesta. Además, se incluye una descripción de cada módulo que compone la aplicación para poder darle mantenimiento, replicarla o extenderla. 
    \item Firebase la plataforma que sirve como intermediario para la comunicación de la aplicación web y el robot NAO además de ser
    la que comparte datos del robot entre las aplicaciones
    web y móvil. Adicionalmente
    el robot NAO se puede
    conectar directamente a Firebase con lo que puede directamente
    leer y escribir en la base
    de datos en tiempo real de Firebase
    para recibir comandos remotos 
    desde la aplicación web (lectura) y almacenar
    registros de su estado o configuración (escritura).

    \item La aplicación móvil para dispositivos con
sistema Android. En este capítulo se expusieron las funcionalidades de la aplicación. Se encontró con la restricción de que el SDK de NAOqi para desarrollar aplicaciones para
Android sólo funciona con 
dispositivos con arquitecturas ARM
y con una versión menor o igual a Android 5.1.1.
\item La aplicación web. Al igual que en la aplicación móvil se exponen sus funcionalidades y un vistazo general
a sus componentes.
\end{itemize}

En la segunda sección del capítulo
se mostraron algunos casos de estudio para poner ejemplos
prácticos del uso de algunos elementos de la arquitectura.
Se expusieron tres casos, una herramienta para
identificar a una persona con una
fotografía capturada con la cámara
del robot, un traductor de texto
encontrado en una imagen
al idioma español y finalmente 
un control por voz del robot
para realizar algunas tareas.



% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% %%%%%%%% Capítulo 3 : Servicio en la nube %%%%%%%%%%%%%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Un servicio de cómputo en la nube sobre la arquitectura CloudNAO}
\label{\detokenize{chapter_three:un-servicio-de-computo-en-la-nube-sobre-la-arquitectura-cloudnao}}
\label{\detokenize{chapter_three::doc}}


\input{C3_servicio_en_la_nube/intro}
\input{C3_servicio_en_la_nube/desc_service_cnn}
\input{C3_servicio_en_la_nube/service_implementation}

\section*{Conclusiones del capítulo}
Al concluir este capítulo se logró
la segunda meta de la investigación.
Se explicó el desarrollo de un servicio que
utiliza una red neuronal profunda
como clasificador de imágenes y
que es consumido por el robot NAO.


Se experimentó con distintas
arquitecturas para seleccionar la
que tuviera el mejor desempeño. Por 
simplicidad sólo se midió la 
proporción de objetos clasificados 
correctamente. Se obtuvieron 
resultados muy altos, lo cual no
dice mucho sobre nuestro modelo. 
Sin embargo, como no era parte del objetivo
del trabajo no se realizó una evaluación
exhaustiva del desempeño de la
red seleccionada.

Con un modelo entrenado, sólo fue necesario 
integrarlo como un recurso más dentro
de la API REST de la arquitectura CloudNAO.
Finalmente se realizaron algunas pruebas
con una aplicación simple donde el robot
enviara fotografías a la API mostrando así
que el servicio es completamente funcional.

% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% %%%%%%%%%%%%%%%%% Conclusiones %%%%%%%%%%%%%%%%%%%%%%%%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\input{conclusions}





% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% %%%%%%%%%%%%%%%%%%%% Anexos %%%%%%%%%%%%%%%%%%%%%%%%%%%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\include{anexos}

% \addcontentsline{toc}{chapter}{Glosario y acrónimos}

\printglossary[nonumberlist, toctitle=Glosario]
\nocite{*}
\addcontentsline{toc}{chapter}{Bibliografía}
\bibliographystyle{unsrt}
\bibliography{referencias}

% \printbibliography

\end{document}